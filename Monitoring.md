# Мониторинг

Этот дашборд в Grafana предоставляет комплексный обзор состояния и производительности микросервиса, помогая в реальном времени отслеживать ключевые метрики и быстро реагировать на любые проблемы.

## Для мониторинга выбраны метрики нескольких слоев:

### Инфраструткурный слой:
#### **RAM**: `process_virtual_memory_bytes`
- **Описание**: Эта метрика показывает использование виртуальной памяти процессом. Она важна для мониторинга использования ресурсов микросервиса.
- **Тип графика**: График "gauge" (шкала)
- **Обоснование**: Шкала позволяет легко визуализировать текущее использование памяти и выявлять случаи превышения допустимых значений.

### Метрики реального времени:
#### **Медиана предсказаний за последние 5 минут**: `histogram_quantile(0.5, sum(rate(main_app_predictions_bucket[5m])) by (le))`
- **Описание**: Эта метрика показывает медианное значение предсказаний за последние 5 минут. Она важна для анализа качества предсказаний.
- **Тип графика**: Линейный график
- **Обоснование**: Линейный график позволяет отслеживать изменения медианных значений предсказаний с течением времени и выявлять тренды и аномалии.

#### **Время выполнения предсказания**: `histogram_quantile(0.5, sum(rate(main_app_prediction_latency_seconds_bucket[5m])) by (le))`
- **Описание**: Эта метрика показывает медианное время выполнения предсказаний. Она важна для мониторинга производительности модели и времени отклика.
- **Тип графика**: График "gauge" (шкала)
- **Обоснование**: Спидометр позволяет быстро оценить, находится ли время выполнения предсказаний в допустимых пределах, и легко обнаружить отклонения.

### Метрики прикладного уровня:
#### **Количество запросов в минуту**: `increase(main_app_predictions_count[1m])`
- **Описание**: Эта метрика показывает количество запросов, полученных вашим микросервисом в минуту. Она полезна для мониторинга нагрузки на сервис.
- **Тип графика**: Линейный график
- **Обоснование**: Линейный график позволяет легко отслеживать изменения в количестве запросов с течением времени, выявляя пиковые нагрузки и периоды низкой активности.
#### **Трафик**: `rate(http_request_duration_seconds_count[5m])`
- **Описание**: Эта метрика показывает скорость HTTP-запросов в секунду к значимой странице сервиса. Она помогает понять, как часто пользователи обращаются к этой странице.
- **Тип графика**: Линейный график
- **Обоснование**: Линейный график позволяет визуализировать изменение скорости запросов, что помогает обнаруживать аномалии в трафике.
#### **Общее количество запросов**: `http_request_duration_seconds_count`
- **Описание**: Эта метрика показывает общее количество HTTP-запросов, обработанных вашим микросервисом. Она полезна для мониторинга общего объема трафика.
- **Тип графика**: Счетчик
- **Обоснование**: Счетчик показывает общее значение, что позволяет легко оценить общее количество обработанных запросов за определенный период.

## Вопросы, на которые отвечает дашборд
- Какова текущая нагрузка на микросервис?
- Сколько запросов обрабатывается в минуту?
- Каков общий объем трафика?
- Каково медианное время выполнения предсказаний за последние 5 минут?
- Каковы медианные значения предсказаний за последние 5 минут?
- Какое текущее использование памяти?
